
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<!-- FOOTER LEFT "Firefly: Visualization" -->
<HEAD>
<TITLE>Firefly: Visualization
</TITLE>

</HEAD>

<BODY BGCOLOR="white" >
<h2>Firefly: Visualization</h2>

One primary component of the Firefly tools is the image visualization.
You can view and interact with image files, both <a
href="https://en.wikipedia.org/wiki/FITS" target="_blank">FITS <img
src="img/jumpout.jpg" height="10"></A> and <a
href="https://ui.adsabs.harvard.edu/#abs/2015A&A...578A.114F/abstract"
target="_blank">HiPS <img src="img/jumpout.jpg"
height="10"></A> formats.  This section
covers interacting with the images -- the visualization tools. <A
href="tables.html">Tables</A> and <a href="plots.html">Plots</A> are
in other sections.<P>

All of the interactive image visualization tools work the same basic
way, and here we describe these basic options, in roughly the order
in which you might encounter them in the window.<P>


<em>Contents of page/chapter:</em><br>
+<A href="#fitsViewer">FITS/HiPS Viewer</a><br>
+<A href="#imageinfo">Image Information</a><br>
+<A href="#breakingout">Breaking Out of the Pane (and Going Back)</A><br>
+<A href="#imagenavigation">Image Navigation</A><br>
+<A href="#toolbar">Image Toolbar</a><br>
+<a href="#stretches">Color Stretches</A><br>
+<a href="#layers">Image Layers: Viewing/Changing the Layers on the Image</A><br>
+<a href="#wcs">World Coordinate System (WCS) Alignment</A><br>
+<a href="#extraction">Extraction Tools</A><br>
+<a href="#selectregion">Region Selection</A><br>
+<a href="#footprints">Footprints</A><br>
<P>&nbsp;<P>




<hr width="50%">
<h3><A NAME="fitsViewer">FITS/HiPS Image Viewer</A></h3>

You can interactively explore the image with the mouse. Move your
mouse over any image that is loaded into the viewer. Details about the
image, specifically, the pixel beneath your mouse cursor, appear
along the bottom left of the image window. Some information is updated
in real time (coordinates); some information (pixel value) is updated
when you stop moving your mouse for a second or two.  The image can be
interactively investigated in this fashion.  <br> <img
src="img/pixelreadout.png"><p>

You can change the units of what is being read out, in terms of
coordinates or pixel values.   <br>

<table><tr><td><img src="img/changecoord.png"  style="border:3px solid
gray"></td><td> If you click on the label of the coordinates,
"EQ-J2000" in the screenshot example above, you get this pop-up, from
which you can choose the coordinates from among:
<UL>
<LI>Equatorial (RA/Dec) J2000 in hh:mm:ss ddd:mm:ss format
<LI>Equatorial (RA/Dec) J2000 in decimal degrees
<LI>Galactic in decimal degrees
<LI>Equatorial B1950
<LI>Ecliptic J2000
<LI>Ecliptic B1950
<LI>FITS Image Pixel
<LI>Zero-based Image Pixel
</UL>
If you click on the "click lock" toggle, the coordinates stop
dynamically updating when you move your mouse, and they update only
when you click on the image. When you do that, little clip boards
appear next to each coordinate readout; clicking on those copy the
position to your clipboard. From this pop-up window here as shown, you
can control the format of the coordinates that are copied to your
clipboard -- they can be as shown in the readout, or in the format
that Python is expecting (for easy pasting into code). 
</td></tr>
</table>

<table><tr><td><img src="img/changevalue.png" style="border:3px solid
gray"></td><td> If you have a FITS image loaded, you have an
additional readout. Click on the label of the readout, "Flux" in the
tiny snippet of a screenshot example above, and you get this pop-up,
from which you can choose the pixel readout from among:
<UL>
<LI>Integer data readout in decimal 
<LI>Integer data readout in hexadecimal
<LI>Floating point data readout in decimal
<LI>Floating point data readout in hexadecimal
</UL>
If you choose the hexadecimal options, it will suppress all
rescaling corrections found in the header, like BZERO or BSCALE. It
will just show you the raw binary number in the file. (For example, if
the value in decimals is 5.13795757, the binary value in the file is
0x40a46a26; <a
href="https://www.h-schmidt.net/FloatConverter/IEEE754.html"
target="_blank">here</A> <img src="img/jumpout.jpg" height="10"> is a
conversion tool between decimal and hex.)
 </td></tr>
</table><P>

<table><tr><td>
In the lower left of the images, if you click on this: <img
src="img/popout.png">, you get this pop-up. If you have a FITS image
loaded, at the top of this pop-up, it shows the whole image; the
orientation of the image is given with a compass rose. There is also a
zoom-in of the image at the location under your cursor. Underneath
that in the pop-up, whether you have a FITS or HiPS image loaded, you
can get a readout of the pixel size, a readout of location on the
image in two different coordinate systems, and a readout of the pixel
value. You can change the units of those values by clicking on the
name of the field: "Pixel Size", "EQ-J2000", "Image Pixel", and
"Value". Each results in a pop-up, as above.
</td><td>
<img src="img/pixelreadoutpopup.png" style="border:3px solid gray">
</td></tr>
</table><P>


You can make the cursor 'stick' on a particular place on the image --
flip the "Click Lock: off" switch to "on" (either in the pop-up or in
the lower right of the image window), and then click on the image at
your desired location. When this is clicked, small "clipboards" appear
near the position readout. Click on that icon to copy that position to
your clipboard.<br> <img src="img/lockposition.png"><P>

&nbsp;<P>

<hr width="50%">
<H3><A NAME="imageinfo">Image Information</A></H3>

The upper left corner of the loaded image has a label that tells you
basic things about the image you are viewing. The telescope and/or
instrument and/or channel and/or data release is first, in black. The
field of view follows, in a paler font; this corresponds to the
(horizontal) width of the image window. The currently selected image
is outlined in brown; other images are outlined in grey.<P>

<img src="img/iraclabel.png" align="middle">  <img
src="img/mipslabel.png" align="middle"> <img src="img/uvlabel.png"
align="middle"> Here are three examples of image labels. The first is
from Spitzer Enhanced Imaging Products (SEIP), IRAC channel 4, which
is 8 micron data, and the field of view is 12 arcmin. The second is
from data delivered by the Local Volume Legacy (LVL) project, and it
is from MIPS channel 3, which is 160 micron data; the field of view is
1.5 degrees.  The third is also from the LVL project, but it is
far-ultraviolet (FUV) data, and the field of view is 32 arcseconds.
<P>

<img src="img/multiplanelabel.png"> Images can have multiple planes;
the arrows allow you to page through the planes. (This is from the
HerMES project and is Herschel SPIRE 250 micron data.)<P>

For HiPS images, the FOV is the angular size of the width of the
HiPS viewer.  Even if the image as displayed is smaller than the
window, the FOV readout is the width of the window, not the image.  If
you shrink your browser screen, the FOV can get smaller because the
viewer gets smaller. If you load more than one image, the FOV can get
smaller because two viewers must fit in the same pane. As a result,
the HiPS FOV requested in the search panel is approximate.  <P>

For FITS images, the FOV label on FITS images works analogously to the
FOV label on HiPS images. If you zoom out, the FOV will increase even
when the FITS image is entirely within the viewer. That's because the
FOV is what the viewer can show you based on the pixel size. If you
drag the image so that it is only partially seen through the viewer,
the FOV will not change. For FITS images, the cutout size is not the
same as the FOV. <P>

<table>
<tr><td><img src="img/target.png"></td><td>
The target on which you searched is overlaid on the main image with a
cross-hair marker, sometimes called a "reticle." You can remove this
(or change its color) from the layers pop-up, described
below.</td></tr></table><P>



&nbsp;<P>

<hr width="50%">
<h3><A NAME="breakingout">Breaking Out of the Pane (and Going Back)</A></h3>

<strong>Panes</strong>: If you have both images and catalogs
loaded into Firefly, the screen is broken up into panes - one
for images, one for catalogs, and one for plots from the catalog. If
you have more than one image loaded in, the image pane is further
subdivided.<P>

<strong>Make it big!</strong> For some purposes, it is useful to
individually view just the table, or the images, or the plots, as
large as possible. In any pane, this icon <img
src="img/expand.png">  appears in the upper right of the pane. 
Clicking on it will expand the pane into a larger window, as big as
possible given your browser size. <P>

<strong>Go back the way it was:</strong> <img src="img/close.png"> The
large "Close" arrow at the upper left is always available in the
expanded views, and enables you to return back to the pane view.<P> 

<strong>Special case of images only:</strong> If you have only images
loaded in, then the images are taking up all of your browser window,
and it is already, by default, in this expanded mode. There's no
'close' arrow in the upper left since there is nothing else loaded
in.<P>

<strong>Removing things:</strong>  To remove an image (or catalog)
entirely, click on the small 'x' in the upper right of the image in
the tiled view, or on the small 'x' in the corner of the catalog tab
in the window pane view.<P>

Note that you can also change the relative layout of <a
href="overview.html#layout">the image, table, and plot panes</A> from
the side menu.<P>

Also see the next section on image navigation.<P>



&nbsp;<P>

<hr width="50%">
<h3><A NAME="imagenavigation">Image Navigation</A></h3>

<DL>
<dt><strong>Single or Tiled Images</strong><P>

<DD>When you have many images loaded in, you can have icons like this:  
<img src="img/imagetiles.png"> that portray (in icon form) the
different views you can have of the images you have loaded.  The first
icon (the big square) denotes "show one image at a time." The second
icon (the cluster of four squares) denotes "show smaller images of all
the images I have loaded at once," e.g., tiled images. Whether the
images (tiled or not) take up all the space or not depends on whether
you are viewing in panes or in the full-screen mode (see immediately
above on <a href="#breakingout">Breaking out of the pane</A>). <P>

<dt><strong>Image List</strong><P>

<dd>Depending on what you have loaded, you may have an additional
icon: <img src="img/imagelist.png"><BR> Clicking on this icon brings
up a list of the images you have loaded, with some additional
information on each one. This list is a <a href="tables.html">table
like any other</A> in this tool. There are two important things about
it, though, that apply to this special case. (1) You can sort this
table, and the images are sorted in response.  (2) You can remove
selected rows, or delete the failed images, with one click; click on
the corresponding button on the lower right of this window.<P>

The power of this table is best demonstrated by an example. <P>

Example: Load the tool. Search on M101, with the default image size. 
Select all bands from the following data sets: SEIP, DUSTiNGS, LVL,
MIPS_LG. Search. When the tool comes back, click on the image list
icon above and obtain this pop-up:<br> <img
src="img/imagelisttable.png" width="80%" style="border:3px solid gray"><br> This
table shows that it found images of M101 from SEIP, and some LVL
bands, but nothing in DUSTiNGS or MIPS_LG. You can use the table to
omit the failed images all at once. You can click on "Delete Failed"
on the bottom right, or you can do the following: click the down arrow
at the top of the "Status" column, tick the box next to "Success" and
then click "filter." The failed images are removed all at once from
the table and your display. Now, click the top of the "Wavelength"
column. The table is sorted by wavelength, and the images in your
display are sorted that way as well.<P>


The "help" links in the far right of this table take you to a master
list of all data sets available in Firefly, from which you can
obtain standard information about the data sets (mission, wavelengths,
links to more information about the program or delivery, and more).
<P>


<dt><strong>Paging through single image views</strong><P>

<DD>If you have many images loaded in and click on the single big square
to view one image at a time, you are provided with navigation aids in
the upper right, like this:<br> <img src="img/paging.png"><br> The
arrows allow you to scroll through your list of images, sorted as
specified in the image table. The filled dot in the list of circles
shows you where your currently displayed image is in the set of loaded
images. The "auto play" tick box on the left triggers automatic
scrolling through each of the loaded images.  <P>

<dt><strong>Scrolling through multi-image views</strong><P>

<DD>If you have several images loaded in and click on the cluster of four
squares to view them all at once, you will also have this as a choice:
<img src="img/scrollimagesoff.png"> <br>
If you toggle this on: <img src="img/scrollimageson.png"> <br>
then each image tile becomes bigger, and you can use your mouse to
scroll through the collection of images. If you are on a Mac, your
scrollbar may be hidden until you try to scroll. <P>

<strong><font color="orange">&#x26A0;</font>  Tips and Troubleshooting</strong> 
<UL>
<LI>If your mouse is in a currently active (selected) image (that is,
highlighted in brown), then your image will zoom rather than scroll.
Just move your mouse over to another image, and then your window will
scroll rather than zoom. Or, find your scrollbar.
</UL>
<P>

<dt><strong>Removing things</strong> <P>

<DD>To remove an image (or anything else removable) entirely, click on the
small 'x' in the upper right of the image in the tiled view. Closing
the upper-right image leaves your mouse on or near the x for the next
image that fills that corner, allowing multiple images to be closed
with minimal mouse movement.<P>

</DL>

&nbsp;<P>

<hr width="50%">
<a name="imageoptions"> <!-- --> </A>
<h3><a name="toolbar">Image Toolbar (FITS and HiPS)</A></h3>

The image toolbox is always present as a row of tools associated with
the images you have loaded, or that are loaded on your behalf. They're
generally located above the images you have loaded, with most of them
on the upper right. Letting your mouse hover over any of these icons
will result in a "tool tip" that appears in order to remind you what
the icon does. Most items apply equally to FITS and HiPS images, but
some only apply to FITS images. <P>

This is the image toolbox when you have clicked on a FITS image you
have loaded:<br>
<img src="img/toolbox.png" height="30"><p>
And, this is the image toolbox when you have clicked on a HiPS image
you have loaded:<br>
<img src="img/toolbox-hips.png" height="30"><p>

The two toolbars are different, but if the same icon appears, it has
the same effect on the image. Many of the icons have a downward pointing
black triangle, which means that there are additional options in a
drop-down menu that appear when you click on the icon. <P>

We now discuss each icon in the order in which they appear.<P>


<DL>



<dt><img src="img/toolsdropdown-small.png"> <em>Tools drop down</em>
<dd> The choices here look like this:<br>
<table><tr><td><img src="img/toolsdropdown.png" style="border:3px solid gray"></td>
<td>&nbsp;<P>&nbsp;<P>
<em><a href="#saveimage">jump to save</A></em><P>
<em><a href="#rotateImage">jump to rotate</A></em><P>
<em><a href="#compass">jump to layers</A></em><P>
<em><a href="#extractshort">jump to extract</A></em><P>
</td></tr></table>
<p>

<dl>
<dd>
<A NAME="fitsDownloadOptions"><!-- --></A>
<A NAME="saveimage"><!-- --></A>
<dt><img src="img/save.png"> <em>Saving the image</em> <dd>The
diskette icon will allow you to save the current image.  You can save
files to your local disk or to the  <a href="/docs/workspace/"
target="_blank">IRSA Workspace <img src="img/jumpout.jpg"
height="10"></A>.  Note that <strong>you</strong> control where the
file is saved on your disk through your browser; your browser may be
configured to store all downloads in a particular location on your
disk.<P>

If the current image is a FITS file, you can save it as a FITS or PNG
or regions file to your local disk. If it is a HiPS file, your only
choices are PNG or regions file. Saved FITS images will not save the
color stretches or overlays; it will just save the underlying FITS
image.  Saved PNG files WILL include any overlays or annotations you
have placed on the image, but will not include the underlying FITS
image. Saved regions files will not save the underlying image, but
will just save the overlays as a DS9 Regions file. See the <a
href="http://ds9.si.edu/doc/ref/region.html" target="_blank">DS9
website <img src="img/jumpout.jpg" height="10"></A> for more
information on the syntax of these DS9 region files. <P>

Note that you can save the original or a cropped version of a FITS
file; see the "select region" icon below to crop, then click on the
save icon. Be sure to save the cropped FITS image (see annotated
figure). This feature is not available for HiPS images.<br> <img
src="img/savecropped.png" style="border:3px solid gray"> <P>

Note that if you <a href="catalogs.html">overlay a large catalog</A>
on an image, then turn around and save a regions file from the 
catalog overlay, the full catalog may not be saved to the regions
file.  If you have &gt;5,000 sources, it's entirely likely that not
every source will be overlaid on the image (because of <a
href="catalogs.html#hier">hierarchical catalogs display</A>), and thus
will not be in the regions file. If you want to save your entire
catalog as a regions file, <strong>save the catalog from the <a
href="tables.html">table pane</A></strong>.<P>

The saved PNG is the same size as it is on your screen. If you want a
big version, make the desired image big on your screen (view
one-at-a-time; see <a href="#imagenavigation">here</A>) before saving
the PNG. <P>

You can't save HiPS images from within IRSA's tool. To download your
own copy, you will have to track down the original source of the
image.<P>

<dt><img src="img/undoall.png"><em>Restoring everything to the
defaults</em>
<dd>If you've played around a lot with the image, you may want to undo
everything you've done. Click this button to restore everything to
their original default values. Some layers may persist; remove them
via the layers icon. <P>

<a name="viewingfitsheader"></A>
<dt><img src="img/infolink.png"> <em>Viewing the image header</em>
<dd>This icon displays a pop-up window with information about the
image. If a FITS image is selected, it will show the FITS header of
the image; if a HiPS image is selected, it will show the HiPS
properties of the image. These are Firefly tables like all the other
<a href="tables.html">tables</A> in this tool, so they are sortable
and filterable, etc. If you click on the columns in the pop-up, it
will sort the keywords alphabetically by that column. This is useful
for finding individual keywords in particularly densely populated FITS
headers. Click the header again to sort in reverse-alphabetical order,
and a third time to return to the default order. Below are examples of
an original and sorted FITS header.   To make this window go away,
click on the 'x' in the upper right of the pop-up, or click "close" on
the bottom left.<br><img
src="img/unsortedfitsheader.png" width="40%" style="border:3px solid gray"><img
src="img/sortedfitsheader.png" width="40%" style="border:3px solid gray"> <P>

For comparison, an example of the HiPS properties window is here:<br>
<img src="img/hipsinfo.png" style="border:3px solid gray"><P>

<A NAME="rotateImage"><!-- --></A>
<dt><img src="img/rotate.png"> <em>Rotating the image to any
angle </em> 
<dd>This feature allows you to rotate the image about the displayed
center of your image to any angle of your choice, in degrees. (This
option is only available for FITS, not HiPS, images.) It will rotate
the image counter-clockwise (to the left) East of North if the image
has a WCS embedded in it. <br><img src="img/rotatepopup.png"
style="border:3px solid gray"><br> You can type a number in the
"angle" box, or use the slider, to rotate the image. To bring it back
to North-up, click on the "North up" icon in the pop-up or in the main
image toolbar.  To exit the pop-up without making further changes, hit
'Close' or the 'x' in the upper right of the pop-up.<P>

<dt><img src="img/northup.png"> <em>Rotating the image so that North is
up</em>  
<dd>Images are frequently (but not
always!) already oriented such that North is up, or close to it.
However, when interactively investigating images, or loading images
from other sources, you could find yourself in a situation where North
is not necessarily up. Clicking this icon will orient the selected
image so that North is up. (This option is only available for FITS,
not HiPS, images.) <P>

<dt><img src="img/flip.png"> <em>Flipping the image on the y-axis</em>  
<dd>Clicking on this icon flips the image on the y-axis. (This option
is only available for FITS, not HiPS, images.) <P>

<a name="compass"> 
<dt><img src="img/compass.png"> <em>Add a compass rose</em> </A>
<dd> When you click this icon, arrows appear on the image showing
which direction is North and which is East. Clicking on this icon a
second time removes this compass rose.   (You can also remove
this layer via the layers icon, described below.)<P>

<dt><img src="img/coordinates.png"> <em>Add a coordinate grid</em>
<dd>  Click on this icon to overlay a coordinate grid on the image.
Click it again to remove it. Customize the units of the grid (to,
e.g., Galactic coordinates) via the "layers" icon (described
below).(Also see information on HiPS grid in the <a href="#wcs">WCS
section</A>.) <P>

<a name="distancetool">
<dt><img src="img/ruler.png"> <em>Measuring a distance</em></A>
<dd>When you click this icon, at first, nothing seems to happen. 
However, you can now click and drag to draw a line on the image, and
the length of the line is displayed (in the middle of the line).   The
units for the measured distance (and the color of the overlay) can be
changed from the "layers" icon (described below). You can
calculate the difference in RA and Dec separately via the layers icon
as well; find the layer associated with the distance measurement and
tick the "offset calculation" box. When it displays the offset
calculation, it will give you the angle in degrees in one corner, and
the length of the line segment in the RA and Dec directions, in the
units you have specified. When you are done with the distance tool,
you can click on the <img src="img/enddistance.png"> that appears
next to the image toolbar, or click on this icon a second time to remove
the distance tool. (You can also remove this layer via the layers
icon.) <P>

<a name="ds9regions">
<dt><img src="img/ds9icon.png"> <em>Read in a DS9 Regions file</em></A>
<dd> When you click this icon, you get a pop-up window from which you
can read in a DS9 regions file from your local disk. See the <a
href="http://ds9.si.edu/doc/ref/region.html" target="_blank">DS9
website <img src="img/jumpout.jpg" height="10"></A> for more
information on the syntax of these DS9 region files. The supported
regions are text, circle, box, polygon, line, and annulus. To make
this window go away without doing anything, click on the 'x' in the
upper right of the pop-up. <P>

<strong><font color="orange">&#x26A0;</font> Tips and
Troubleshooting</strong>: If you overlay a list of sources you created
in ds9 regions format from your disk, it will only be overlaid on the
current image, not all of the images you have loaded. If you want to
have it overlaid on all the images you have loaded, create a catalog
from your source list and overlay it as a <a
href="upload.html#catalogs">catalog</A>. Then it will appear on
all of the images you have loaded, provided that the positions overlap
on the sky.<P>

<dt><img src="img/marker.png"> <em>Put a marker on the image</em> <dd>
When you click this icon, a drop-down menu appears with several
possible options:<br><img src="img/markeroptions.png"
style="border:3px solid gray"><br> The first overlay choice (simply
called 'marker') is a red circle. Initially, it appears in the center
of the images, and is meant to be moved to wherever you first click in
the image. It looks like this:<br> <img src="img/circlemarker.png">.
The dash-dot line around it means that it is 'active', so you can move
(click and drag the marker) or resize it (click and drag the dash-dot
boundary).   You can change the color of the marker (and change the
label) via the "layers" icon (described below). You can also remove
this layer via the layers icon. There are several additional options
in the drop-down, enough that they have their own <a
href="#footprints">section below</A>.<P>

<a name="extractshort">  
<dt><img src="img/drill.png"> <em>Drill down through the image</em></A>
<dd> If your FITS image has multiple planes or HDUs, especially if
each plane or HDU represents a different wavelength, it can be useful
to "drill" down through the image cube at a given position on the sky.
This tool allows you to do just that. When activated, this tool
extracts the data at the place your mouse clicks down through the
cube. For more information on saving the information, see the <a
href="#extraction">extraction section below</A>. <P>

<dt><img src="img/line.png"> <em>Draw a line in the image</em>
<dd>When this tool is activated, you can draw a line in your FITS
image with your mouse, and it will extract for you the pixel values
along that line. If you have more than one image loaded and visible,
you can shift-click in another image to see the same line in another
image. For more information on saving the information, see
the <a href="#extraction">extraction section below</A>. <P>

<dt><img src="img/points.png"> <em>Make points in the image</em>
<dd>When this tool is activated, you can click in your FITS image with
your mouse, and it will extract for you the pixel values at the
location of your click, creating a catalog for you as you click.  If
you have more than one image loaded and visible, you can shift-click
in another image to extract points from another image. For more
information on saving the information, see the <a
href="#extraction">extraction section below</A>. <P>

</dl>

<dt><img src="img/zoom.png"> <em>Zoom</em>
<dd> When your mouse is in an image, these options appear in the upper 
left of the image.
<dl>
<dt><a name="zoomin"><img src="img/zoominout.png"> <em>Zooming in or out</em></A>  
<dd>
Clicking on these magnifying glass icons zooms in or out of the image.
The readout of the net effect of your zooming on the displayed field
of view (FOV) appears at the top left of each image.  <P>

If you click zoom in or out rapidly, a pop-up window appears to allow
you to more rapidly select the zoom level (field of view) you want.
Select the desired level, or click on the 'x' in the upper right to
make the window go away. Here is an example: <br><img
src="img/zoomlevel.png" style="border:3px solid gray"><P>

You can alternatively zoom using the mouse wheel (or drag forward
and backward on a touchpad or magic mouse).<P>

Note that there is a maximum (or minimum) allowed zoom level, and they
are different for FITS and HiPS images. A notification will appear
when you have reached the maximum (or minimum) allowed zoom level for
a given image.  To enlarge images more (or less) than that, please
repeat your search to obtain new images with smaller (or larger)
spatial extent. HiPS images are specifically designed for large areas,
so if you need a big area, use HiPS. If you want to zoom in close
enough to see individual original pixels, your best choice is FITS.
<P>

See also the section in the Images chapter on <a
href="images.html#changing">changing coverage images</A>, specifically
that on automatic transitions while zooming</A>. <P>

<dt><img src="img/fitandfill.png"> <em>Fit image to screen or fill
screen</em>  
<dd>
These two icons are designed to maximize the available space in your
browser window. The first one automatically picks a zoom level such
that the image entirely fits within the available space (which could
be your whole browser window, or just the portion of it where that
image is loaded). The second one automatically picks a zoom level such
that the image fills as much of the available space as possible (e.g.,
it is zoomed such that short axis of the window is filled with the
image, whether that short axis is left-right or up-down). <P>

By default, the images that are returned are frequently but not always
centered on your search target. Clicking on these icons let you see
the whole image that is returned, whether or not it is centered on
your target. <P>

This is available for both FITS and HiPS images, though note that FITS
images retrieved from IRSA using this tool are typically square, and
HiPS images cover the sky, so fitting the image to the screen
might not be what you want to do. <P>

<dt><img src="img/zoomoriginalsize.png"> <em>Zooming to a 1-to-1 size</em>  
<dd> Clicking this icon will zoom the image such that one pixel in the
image is one pixel on your screen. This option is only available with
FITS images; HiPS images by their nature have pixels of varying sizes,
so this button would have no meaning in this case.  <P>



</dl>

<A NAME="colortable"><!-- --></A>
<dt><img src="img/colortable.png"> <em>Color table drop down</em>
<dd>This icon enables you to change the color table of the
displayed image. (This option is available for FITS and HiPS
images.)  When you click the button, a drop-down menu appears. 
<table><tr><td width="20%"><img src="img/colortableoptions.png" style="border:3px solid
gray"></td><td>
<UL>
<LI>The top of the menu either says "Color and overlays locked" or
"Color and overlays unlocked" -- by default, all of the (FITS) images
that you have loaded are locked together for color and overlays. What
that means is if you change the color table (via this menu), then the
color table for all the (FITS) images are changed. (Or, if you add a
layer to one image, then the layer is added to all the images; see
below.) If you don't want this to happen, select "Color and overlays
locked" to unlock it. Select the text again to lock it again.<P>

<LI>The arrow in the upper right creates a pop-up window out of this
drop-down menu so that you can leave the choices up while settling on
the best option.<P>

<LI>The next portion of the menu has a wide variety of color table
choices. Select your new color table from the options shown.<P>

<LI>Alternatively, you can use the "color bar" slider to move among the
color tables by number. These numbers correspond to the color bar
number used in the Python implementation of the Firefly tools. <P>

<LI> Below the color bar slider, there are sliders controlling the
bias and contrast. Click or drag the slider to change the image
display. <P>
</UL>
</td></tr></table>

<dt><img src="img/stretch.png"> <em>Color stretch drop down</em> 
<dd>This icon enables you to change the color stretch of the displayed
image. (This option is only available for FITS, not HiPS, images.) 
Because this is complicated, for much more information, please <a
href="#stretches">see below</A>.<P>

<dt><a name="panbytablerow"><img src="img/recenter.png">
</A><em>Re-center the image drop down
</em>
<dd> Clicking this icon produces a drop-down menu:<br>
<img src="img/recenterpulldown.png" style="border:3px solid
gray"><br>
By default, "Pan by table row" is turned on (checked), but, depending
on how you have loaded your images, or whether you have catalogs
loaded, it may not seem to do very much. However, if you have a
catalog loaded and are zoomed in on your images, as you scroll through
your catalog, the FITS image underneath will move as needed when you
have selected an observation in a different part of the sky than was
originally shown.<p>

<strong>Example of "Pan by table row" functionality:</strong> Load the
tool. Search on M101, and ask for all SEIP channels (4 IRAC, 1 MIPS).
When it returns, search on catalogs. Select a WISE/AllWISE catalog,
and ask it for a polygon search covering the image that is loaded.
When the catalog loads, go up to the image toolbox and be sure to
select Align and Lock by WCS (see <a href="#wcs">WCS Alignment</A>
below for more information). Sort the catalog by RA by clicking on the
top of the RA column. Note that the images are all now slewed to
center the first object (the furthest east) in the catalog. Click on a
source in the plot near the west edge of the image. Note that the
images are all now slewed to center that newly selected source.  <P>

Other choices are to center on the target of the observation, center
the image in the window, or center on a target of your choice. For the
last of those, you can simply center on that target, or center and
leave a marker on the image at that location.<P>

That last option may or may not appear, depending on what you have been
doing before getting to this screen. If it can, it gives you a choice
to center on recent positions. Move your mouse over to the arrow to
select from a list.<P>

<dt><img src="img/selectregion.png"> <em>Selecting a region drop down</em></a>
<dd>When you click this icon, you can select a region of the image for
further actions. Because this is complicated, for much more information, 
please <a href="#selectregion">see below</A>.<P>



<dt><img src="img/layers.png"> <em>Image Layers: Viewing/Changing the
Layers on the Image</em>
<dd>Every time you add something new to the image, you add a 'layer'
to the image. This is complex, so please <a href="#layers">see
below</A> for much more information. <P>





<dt><img src="img/lockimages.png"><img src="img/unlockimages.png"><em>Lock/unlock images</em>
<dd>You may have this "lock images" icon appear in your toolbar; it
will appear as the first icon if they are locked and the second icon
if they are unlocked. The
main purpose of this icon is to lock all the images you have loaded
for zooming, scrolling, etc. You need to specify how it locks and for
how long. Clicking it produces this drop-down menu:<br>
<img src="img/lockimagespulldown.png" style="border:3px solid gray"><br>
The first set of options aligns the images only once, temporarily; the
second set of options makes the alignment persist ("lock") when you
move the images (that is, when you move one, they all move). You can
align by the images' WCS (e.g., RA and Dec), by the target, by the
pixels according to the origin of the coordinate system in the image
header, or by the pixel at the image center. The most common choice is
likely the WCS align and lock. You can align FITS and HiPS images to
each other. This is discussed in more detail in the <a href="#wcs">WCS
section</A>.
<P>

<a name="pinning">
<dt><img src="img/pinchartbutton.png"> <em>Pin image</em> </A>
<dd>This icon does not always appear. If you do have this icon, you
can "pin" the image. Within this tool, "pinning" just means "hold on
to this item within this tool." It doesn't mean "save this data to
disk", nor does it mean "download all the data that goes with this";
it means "retain this item in this tool for now." Think of it as if
you have a metaphorical bulletin board behind your computer monitor
and you want to put an image you see on that bulletin board
temporarily (with a pushpin!) to remember it while you continue to
look through other images. In many cases, Firefly will treat
images as already pinned for you. In other cases, you have to actually
pin them before it will create a pinned images tab.<P>

<dt><img src="img/help.png"> <em>Getting help</em>
<dd>  Clicking on this icon takes you to this help page, usually to a
spot in the help relevant to whatever you're currently doing.<P>

</dl>

To remove an image (or anything else removable) entirely, click on the
small 'x' in the upper right of the image in the tiled view, or on the
small 'x' in the corner of the image (or catalog) tab in the window
pane view.<P>


&nbsp;<P>

<hr width="50%">
<h3><a name="stretches">Color Stretches</A></h3>


<img src="img/stretch.png"> This icon enables you to change the color
stretch of the displayed image. (This option is only available for
FITS, not HiPS, images.) When you click the button, a drop-down menu
appears with a variety of choices. You can choose from a set of
pre-selected options:<br><img src="img/stretchoptions.png"
style="border:3px solid gray"><br> If you pick the first one, "color
stretch", you can customize the stretch. A pop-up window appears with
a histogram of the values in the image, and you can change the stretch
type and range. <br><img src="img/customstretch.png" style="border:3px
solid gray"> <BR> If you pick a color stretch from the pre-defined
options, the pop-up window reflects this change. If you change the
color stretch in the pop-up window, the drop-down menu changes
correspondingly.<P>

<strong>Example:</strong> Display the pop-up for color stretch. From
the main drop-down, pick 'Linear stretch to 99%'. Go back to the color
stretch pop-up. Note that it has filled out the stretch type and
ranges to reflect the current choice. Then -- either with the pop-up
window still up or not -- go back and pick a different pre-defined
stretch from the standard options. Note that the values in the pop-up
change to reflect this current choice. From the pop-up, pick a
different stretch type -- try "histogram equalization." Select
"refresh" to update the images. Go back to the drop-down menu. The
last 7 items have changed to be based on histogram equalization, as
opposed to the "linear" default.  <P>


If you have a 3-color image, you can change the stretch in each color
plane separately; select the tab at the top accordingly for red,
green, or blue.  By default, it stretches each band independently, and
you can set the parameters in the stretch pop-up accordingly.<P>
<img src="img/3colorstretch.png" style="border:3px solid gray"><P>

As described in <a
href="https://ui.adsabs.harvard.edu/#abs/2004PASP..116..133L" 
target="_blank">Lupton et al. (2004) <img src="img/jumpout.jpg"
height="10"></A>, a different algorithm may be useful for creating
3-band color images. Select "Hue preserving stretch" to invoke this
option. This stretch should be a brightness-independent
color-preserving asinh stretch, though in practical terms, it seems to
work best for optical images. <P>

<img src="img/luptonstretch.png" style="border:3px solid gray"><P>

It may be useful to scale individual channels; sliders allow you to do
so. The Q parameter has another slider. For a linear stretch, Q=0;
increase Q to change what features are emphasized. Pedestal values can
also be set to allow the level assigned to "black" to change.<P> 

<!-- The original ticket is https://jira.lsstcorp.org/browse/DM-14799
Paper: https://arxiv.org/pdf/astro-ph/0312483.pdf
Astropy implementation (not sure it is helpful):
https://github.com/astropy/astropy/blob/master/astropy/visualization/lupton_rgb.py
Follow-up ticket for scaling coefficients and help is https://jira.lsstcorp.org/browse/DM-15725
-->






&nbsp;<P>

<hr width="50%">
<h3><a name="layers">Viewing/changing the layers on the image</A></h3>

Every time you add something new to the image, you add a 'layer'
to the image. You can have an image with a lot of annotations on
it.<P>

<img src="img/layers.png"> The number that appears circled in blue
over the layers icon tells you at any given time how many layers you
have on the currently selected image (the image outlined in brown). 
<P>


<table><tr><td>If you click this layers icon, you will get a pop-up
window with a list of all the layers you have on top of the image. 
Here (on the right) is an example of a well-populated layers pop-up;
in real life, this is scrollable to see several more layers). From
this pop-up, you can:
<UL>
<LI>turn layers off and on (click on the switch on the left of the
corresponding row);
<LI>remove layers entirely (click on the 'x' on the right of the
corresponding row); 
<LI>change colors of overlays (see below);
<LI>change symbol shapes and sizes (for <a href="catalogs.html">overlaid catalogs</A>); 
<LI>change annnotations (for markers);
<LI>or change units (for the coordinate grid or the <a href="#distancetool">distance tool</A>).
</UL>
To add entirely new layers, though, you need to go to other
options within the toolbar.<P>

You can "show all" or "hide all" with the buttons on
the lower left of the pop-up window.  To make this pop-up window go
away, click on the 'x' in the upper right of the pop-up. <P>

Note the target description:<img src="img/targetrowofpopup.png"
style="border:3px solid gray" width="350"> This reminds you of the target on which
you searched -- here, it was M101, where the coordinates were resolved
by NED (as opposed to Simbad). The two icons next in that row
indicate, respectively, "copy this location to the clipboard" and
"center image on this position." 
 </td><td><img src="img/layerspopup.png" style="border:3px solid
gray"> </td></tr></table> <P>

<a name="colorpicker"></A>
<table><tr><td width="50%">Where it's possible to change colors of a
layer, click on the 'colors' link to be taken to a new pop-up from
which you can select a new color. <P> From here, you can click on your
desired color in the top colorful box. Immediately below that box, you
can change the color and saturation of the top box so that you can
select from a different range of colors. Below that, you can enter
numerical hex codes or RGBA values (where the value for RGB is between
0 and 255, and A is in units of percent, e.g., 50 = 50%).  Finally,
you can also select from a pre-defined set of 15 colors by clicking on
any of the small boxes. Note that the numerical codes update as you
select different colors. Your choices are implemented as soon as you
select them.  Click 'Close' to close the window, or click 'x' in the
upper right.
</td><td>
<img src="img/colorpickerviz.png" style="border:3px solid
gray"></td></tr></table> 
<P>

<a name="symbolpicker"></A>
<table><tr><td width="50%">For catalogs or the search target, you can
also select the symbol shape and size. To adjust the size, type in the
symbol size in pixels or use the up/down arrow keys to change the size
by one pixel at a time. Your choices are implemented as soon as you
select them. Click 'Close' to close the window, or click 'x' in the
upper right. <P>
</td><td>
<img src="img/symbolpicker.png" style="border:3px solid gray"></td></tr></table> 
<P>

Note that if you load both FITS and HiPS images at the same time, it
can include a marked layer on the HiPS image that is the footprint of
the FITS images you have loaded. A label appears at the center of that
footprint, which may be disconcerting if you are not zoomed out enough
to see the region itself. Here is an example, zoomed out so it is
clear what is going on:<br> <img src="img/hipsregion.png" width="50%"
style="border:3px solid gray"> <P>


Once you have loaded a HiPS image into Firefly, if you select
the HiPS image and click on the layers icon (<img src="img/layers.png"
align="center">), you will have new, HiPS-specific choices in the
layers:<br> <img src="img/hipslayers.png" style="border:3px solid
gray"><P>

<dl>

<dt>
<a name="hipsgrid"><strong>HEALPix (HiPS) Grid</strong></A><P>

<dd>To turn on these choices, toggle the switch to the left of "HEALPix
(HiPS) Grid". (See <a href="images.html#hips">here</A> for more
information on HiPS images in general.) <P>

<strong>Auto</strong>: This option overlays a position grid, with the
tile numbers marked in the center of each box. As you continue to zoom
in, when smaller tiles are needed, they are drawn, with the new tile
numbers marked. You may not zoom beyond HiPS Norder level 14 tiles.
The numbers after the "/" is in the "NESTED" (as opposed to RING or
NUNIQ) numbering system; see <a
href="http://www.ivoa.net/documents/HiPS/" target="_blank">the IVOA
standards document <img src="img/jumpout.jpg" height="10"></A> for
more information.<P>

<strong>Grid Match Image Depth</strong>:  If you select this option,
the grid will adjust to a new level when you zoom in and a new level
of HiPS image both exists and is used for the display.<P> 

<strong>Grid Level Lock</strong>: Selecting this option yields an
additional numerical drop-down menu. The higher number you pick, the
smaller the grid boxes are that are drawn. When this option is
selected, the boxes stay the same size regardless of how zoomed-in on
the image you are.<P>

<dt>
<a name="hipsmoc"><strong>HiPS MOC</strong></A><P>
<dd>To turn on these choices, toggle the switch to the left of "MOC". <P>
(See <a href="images.html#hips">here</A> for more
information on MOCs in general.)

A MOC tells you via a simple boolean yes/no, is there
sky coverage from this data set in this region. The choices here are: 
<UL>
<LI>Outline - an attempt to outline the entire region covered by the
data; it still sometimes struggles near the edges of coverage, so zoom
in to get a better sense of the coverage edges.  
<LI>Fill - filled regions, where you can control the opacity of the
overlay by going to the <a href="#colorpicker">color picker</A>; you
control the opacity by changing the number above the "A". 
<LI>MOC Tile Outline - individual tile outlines, where the tiles are
set by the MOC tiles themselves (as opposed to tiles created by the
mosaic tiles that make up the data set).
<P>
</UL>
</dl> 

<strong><font color="orange">&#x26A0;</font> Tips and Troubleshooting</strong>: 
<UL>
<LI>The entire concept of a MOC is built upon the "tiles" that are
inherent to the HiPS concept. As a result, those tiles are imprinted
on how the MOC is rendered, especially near edges or corners of
coverage. Strange behavior may result; you can always zoom in to get a
better sense of the coverage. For authoritative information, download
the actual data for the region you are concerned about.
<LI>For the "fill" option for a MOC, depending on how you
display a MOC, you may see two shades of color in the MOC. It is
important to note, though, that the
information it is displaying does not include depth of coverage,
merely boolean "is there data there or not." Why is it displaying
shading? Well, it's rounding. For example, a given WISE MOC might be
generated at order 13. At this order, there are 805,306,368 HEALPixels
on the sky, and they are about 26 arcseconds across. When zoomed out
far, there is no point in trying to show each of these pixels, so the
application "rounds up" the MOC to an order in which there are roughly
100-200 displayed HEALPixel polygons horizontally across the image.
When it does this, it flags the rounded up polygons with the paler
color. So the boundaries of a coverage region in the MOC all get a
paler color. If you zoom in far enough on a MOC, the two-tone colors
go away. 
</UL>





&nbsp;<P>
<hr width="50%">

<h3><A NAME="wcs">World Coordinate System (WCS) Alignment</A></h3>

As described above, there is a way to lock/unlock images to each
other <img src="img/lockimages.png"><img src="img/unlockimages.png">
for position matching. This section describes
the image locking in more detail.<P>

When aligning images, you can specify how the images align and for
how long. Clicking the lock images icon produces this drop-down
menu:<br> <img src="img/lockimagespulldown.png" style="border:3px solid gray"><P>

The first set of options aligns the images only once; the second set
of options makes the alignment persist ("lock") when you move (zoom,
etc.) the images. <P>

You can align by the images' WCS (world coordinate system,
e.g., RA and Dec), by the target (align by target on the screen,
regardless of position in the sky), by the pixels according to the
origin of the coordinate system in the image header, or by the pixel
at the image center. The most common choice is likely the WCS align
and lock.<P>

Here are examples of different alignments, in this order: align by
WCS, by pixel origin, and by pixel at image centers.<br>
<img src="img/alignbywcs.png" width="100%" style="border:3px solid gray">
<img src="img/alignbypxorigin.png" width="100%"  style="border:3px solid gray">
<img src="img/alignbyimgcenter.png" width="100%" style="border:3px solid gray">
<P>
Note that aligning by WCS puts North up, and aligned so that each
image has the same angular scale.  <P> In contrast, here is an align
by target - six different  galaxies, but the target used for each
image is in the center of each image tile.<br>
<img src="img/alignbytarget.png" width="100%"  style="border:3px solid gray"><P>



Aligning images by position on the sky is likely to be the most common
use of locking. You can align FITS and HiPS images to each other. <P>





&nbsp;<P>
<hr width="50%">
<h3><a name="extraction">Extraction Tools</A></h3>

Several tools allow you to extract information from images or image
planes, but only for FITS (not HiPS) files.

<UL>
<LI><img src="img/drill.png" align="center"> -- Extract down through image planes
<LI><img src="img/line.png" align="center"> -- Extract a line from the image
<LI><img src="img/points.png" align="center"> -- Extract points from the image
</UL>

All three of these follow the same basic structure -- 
<OL>
<LI>Intitiate extraction mode
<LI>Set aperture  
<LI>Try extraction; repeat if desired
<LI>Pin (retain) extraction if desired
<LI>Download (as table or chart) if desired
<LI>Repeat if desired
<LI>Click on "end extraction" to finish the process.
</OL>

The drill pokes down through multiple planes, the line moves across
pixels in a plane, and the points extracts points from a plane.<P>

Here, we cover the basic approach, with specifics of each
tool integrated as we go along.<P>

When you click on one of these icons, you enter into the extraction
mode. Text appears next to the image toolbar to remind you that
you are in this mode: <img src="img/endextraction.png"> When you are
done, to end this mode, click on this "end extraction."<P>

When starting out, the pop-up window that you get depends on the tool
you pick.
<table>
<tr><td> For the drill:</td><td>for the line:</td><td>and for the points:</td></tr>
<td><img src="img/drillinit.png" width="300" style="border:3px solid gray"> </td>
<td><img src="img/lineinit.png" width="300" style="border:3px solid gray"></td>
<td><img src="img/pointsinit.png" width="300" style="border:3px solid gray"></td>
</table>

In all three cases, the top center of the extract pop-up window has a
drop-down from which you can select the aperture value. You can choose,
in pixels, 1x1, 3x3, 5x5, or 7x7. Values can be summed or averaged. <P>

From this point, you can click on your image, or click and drag for
the line tool. The pop-up then contains a plot of your extraction. 
<table>
<tr><td> For the drill:</td><td>for the line:</td><td>and for the points:</td></tr>
<td><img src="img/drillextract.png" width="300"  style="border:3px solid gray"></td>
<td><img src="img/lineextract.png" width="300" style="border:3px solid gray"></td>
<td><img src="img/pointextract.png" width="300"  style="border:3px solid gray"></td>
</table>

In each of these cases, it does the best that it can to label the axes
accordingly. The cube that is used for the drill example here follows
the spectral data model so that it is recognized as a spectrum, and it
plots against wavelength. The line extraction is a 7x7 average and
plots the offset in arcseconds from the initial mouse click, given the
WCS information in the header of the image. The point extraction is a
3x3 sum, and plotted in image x coordinates, but can be changed to
show image y coordinates. <P>

Note that for the line, if you have more than one image loaded and
visible, you can shift-click on a new image to see the same line on a
new image. And, for the points, you can shift-click to change images
without extracting points.<P>

Once you have an extraction that you like, you can retain the
extraction for further analysis, in any of three ways. "<strong>Pin
chart/table</strong>" extracts the information as a <a
href="tables.html">table</A>, just like any of the other tables in
this tool, with an accompanying <a href="plots.html">plot</A>. You can
then manipulate the table/plot just like any other table or plot in
this tool. If the tool recognizes the extraction as a <a
href="spectra.html">spectrum</A>, you may have additional
capabilities. <strong>Download as Table</strong> saves the table to
your local disk <a href="tables.html#save">with all the same options
as a regular table</A>. <strong>Download Chart</strong> saves the plot
as shown, as a png file.<P>

Once you pin or save your extraction, the tool leaves a "footprint" of
your extraction on the image so that you can remember what the
extraction was.  <strong>NOTE THAT it is not interpolating</strong>
across fractional pixels here. It is averaging if you have asked it to
average, but particularly if your pixels are
large, if you draw a line that is diagonally across pixels, it will be
immediately obvious that it's not interpolating. This line gets
rendered as these pixels:<br>
<img src="img/notinterpolating.png"><br>
The point appears on the image at the lower left corner of the
relevant pixel.<P>

You can pin as many different extractions as you want. Each one will
result in new tabs with the corresponding table at the bottom of the
screen. There are navigation aids within the <a
href="tables.html#navigation">tables section</A> that may help.<P>



&nbsp;<P>

<hr width="50%">
<h3><a name="selectregion">Region Selection</A></h3>

<img src="img/selectregion.png"> When you click this icon, you can
select a region of the image, from which then you can do a whole host
of things to the image and to the catalog you may have overlaid upon
it. <P>

<table><tr><td>First, from the drop-down, you are given a choice of a
rectangular selection or an elliptical selection:</td><td>
<img src="img/selectiondropdown.png" style="border:3px solid
gray"></td></tr></table>

After you make that choice, you can click and drag in the image,
selecting a box or a circle on the image.  For the circle, your click
is the center of the circle and the drag is the radius of the circle;
for the box, your first click is one corner of the rectangle, and the
drag is the opposite corner of the rectangle. This region can be
resized by grabbing and dragging the corners of the box or the pixels
delineating the corners of a box around your code. If you need to
move the image underneath, you can hold the shift key and click and
drag.  <P>


When you have selected a region of the image, additional icons
appear above the image, and exactly which icons you see is a function
of whether you are working on a FITS or HiPS image, and whether or not
you have a catalog overlaid: <img src="img/selectoptions.png"> These
icons allow you to do several things:
<DL>
<dt><img src="img/crop-small.png"> <em>Crop the image</em>
<dd>(FITS only) Crop the image to the selected region. Then you can
save the cropped FITS image via the save icon described above.<P>
<strong>Note that</strong>, if you have a rotated FITS image such that
a crop would have to bisect pixels, it will show you the region that
encompasses your selection. If you crop at that point, then, it will
crop in image space (such that pixels are not bisected). See the
figure below -- in the original image, north is up. This has been
rotated 45 degrees. The selected region is in white. The yellow
dash-dot line is the crop in pixel space that encompasses the selected
region. <br> <img src="img/cropregion.png"><p>
<dt><img src="img/checkmark-small.png"><img
src="img/cancelselection.png"><em>Select sources</em> (and <em>cancel
selection</em>)
<dd>(Only if a catalog is overlaid) Select the catalog sources overlaid on
the image within the region. Selecting highlights the sources in the 
list and plot with a different color row or symbol. Once there are
selections made, the second icon appears to give you an option to
cancel the selection.<P>
<dt><img src="img/filter.png"><em>Filter sources</em>
<dd>(Only if a catalog is overlaid) Filter the overlaid catalog down to the
sources within the enclosed area. When you choose to impose a
filter via this selection mechanism; the filters icon changes above
the catalog to indicate that there is a filter applied (<img
src="img/filtersapplied.png">). To clear the filters, click on the
cancel filters icon (which also appears after you impose filters):
<img src="img/cancelfilters.png">. There is much more on <a
href="tables.html#filters">filters</A> in the Tables section.<P>
<dt><img src="img/zoom-small.png"><em>Zoom the image</em>
<dd>Zoom the image to fit the selected area into your field of
view.<P>
<dt><img src="img/recenter-small.png"><em>Recenter the image</em>
<dd>Recenter the image on the selected area.<P>
<dt><img src="img/stats-small.png"><em>Obtain statistics</em>
<dd>(FITS only) Obtain statistics from the image on the region.
The statistics option results in a pop-up that looks
something like this:<br><img src="img/imagestatistics.png" style="border:3px solid gray"> <br> Note
that it calculates the location of the minimum and maximum fluxes, and
the aperture and flux-weighted centroids; the flux values given are in
the same units as the FITS file. If you put your mouse over the row of
the table in the pop-up, that location appears as an 'x' on the
image.  <P>
<dt><img src="img/searchaction.png"><em>Search</em>
<dd><table><tr><td>This tool implements a new search, an "action", on the region
you have selected. It results in this drop-down (right).
where this example is based on a region centered on
84.036131, -69.224431, J2000 decimal degrees, over a 4-cornered polygon.
(You can also use the region tool to define a cone; this example
happends to be a rectangle.)
From this drop-down, you can launch:
<UL>
<LI>A TAP polygon search over this region (<a href="othersearches.html#generaltap">more
information about TAP searches</A>)
<LI>A NED cone search at this position with a radius attempting to
correspond to this polygon (<a href="othersearches.html#nedcatalogs">more
information about NED searches</A>); results loaded into this tool.
<LI>A Simbad cone search at this position with a radius attempting to
correspond to this polygon; results loaded into this tool.
<LI>A Simbad cone search at this position with a radius attempting to
correspond to this polygon, but launch another browser window or tab 
at Simbad with the results.
<LI>A TAP cone search at this position with a radius attempting to
correspond to this polygon (<a href="othersearches.html#generaltap">more
information about TAP searches</A>); results loaded into this tool.
<LI>A FITS <a href="images.html">image search</A> at this position (at IRSA, via this tool); results
loaded into this tool.
<LI>A HiPS <a href="images.html">image search</A> at this position (via this tool); results loaded
into this tool.
<LI>A cone search of the SOFIA archive at this position with a radius
attempting to correspond to this polygon; results loaded into the
SOFIA tool.
<LI>A cone search of the WISE Image Service at this position with a
radius attempting to correspond to this polygon; results loaded into
the WISE tool.
<LI>Refine the search region
</UL>

</td><td>
<img src="img/imageactionpulldown.png" align="top" width="350"
style="border:3px solid gray"></td></tr></table>

The last option brings up another pop-up window (similar to <a
href="othersearches.html#interactivetarget">this</A>) that allows you
to refine the search region iteratively by choosing a cone or polygon,
setting the center, and setting the cone size or polygon vertices.<br>
<img src="img/imageactionrefinesearch.png" width="350"
style="border:3px solid gray"><br> From here, you can change the kind
of search, refine the positions,  launch searches from your refined
position (blue button on lower left), and select from the image again
(drop-down on the lower right). 

</dl>


When you are working with the selection tool, this: <img
src="img/endselect.png" width="70"> appears next to the image toolbar
to remind you that you are in that mode. If you are refinifng
positions for a search, it will be <img src="img/endsearchmarker.png"
width="120">. Either way, when you are done with the selection tool,
if your other actions don't turn off the selection tool, click on that
text to turn it off.<P>


















&nbsp;<P>

<hr width="50%">
<h3><a name="footprints">Footprints</A></h3>

The marker icon (<img src="img/marker.png">) has a drop-down menu with
several possible options:<br><img src="img/markeroptions.png" style="border:3px solid gray"><br> Any
of the options with an arrow on the right can expand to additional
subsidiary choices, e.g.,:<br> <img src="img/markeroptionsp1.png"><br>
We now describe these various footprints here.<P>

For each of these choices, the markers appear initially in the center
of the loaded images. The first mouse click you make in any of the
images will move the marker to that location.<P>

Each of these marker choices, when overlaid and/or selected as
'active', has a dot-dash square around it. If it is asymmetrical (most
of them are), it has an additional "appendage" and a red plus at the
center of the footprint:<br> <img src="img/activeregion.png"><br>
These so-called "handles" allow you to resize and/or rotate the
marker, depending on the nature of the marker. These handles only
appear when the marker is selected as active; if you wait a few
seconds, they vanish.<P>

<strong><font color="orange">&#x26A0;</font> Tips and Troubleshooting</strong> 
<UL>
<LI>Some of these footprints are <em>large</em>. If you have a small
image, some of these footprints will be larger than your image. Zoom
out to see it, or find a larger image to use. If you overlay, say, a
Nancy Grace Roman Space Telescope (formerly WFIRST) footprint on a
2MASS image, you may need to zoom out a considerable amount before you
can see the Roman footprint. You will see the center indicator of the
marker before you will see the Roman footprint itself. 
<LI>You can add multiple copies of the same marker using the <a
href="#layers">layers pop-up</A> (described generally above).  From
the layers pop-up, there is a link right under the 'angle' option that
says "Add another [marker type]" -- click on that to get an additional
marker of the same type. You can also add a label to the marker from
the layers pop-up, or change its color.
<LI>If you have many footprints on the same image, you may have
trouble grabbing and moving footprints lower in the stack of layers on
the image. For example, overlay footprint 1, then footprint 2, and you
might have a hard time grabbing and rotating footprint 1 after
footprint 2 has been added. The only workaround here is to use the
layers pop-up (described generally above) to temporarily hide
footprint 2, then move footprint 1, then restore footprint 2.
<LI>If you have images of very different resolutions loaded (e.g.,
IRAS and really anything else), sometimes it struggles to render the
marker on each image. You may need to place markers on one image at a
time. (Unclick the "lock color & overlays" option to place markers one
image at a time.)
</UL>



<img src="img/circlemarker.png"> The first overlay choice (simply
called 'marker') is a red circle.   <P>

The remaining markers are all footprints from various telescopes:
Spitzer, SOFIA, HST, JWST, and Roman. HST, JWST and Roman are derived
from information provided via MAST (see <a
href="http://gsss.stsci.edu/webservices/footprints/help.html"
target="_blank">http://gsss.stsci.edu/webservices/footprints/help.html
<img src="img/jumpout.jpg" height="10"></A>.) For JWST and Roman in
particular, they are pre-launch values.<P>

<img src="img/iracfoot.png"> <strong>Spitzer/IRAC 3.6 and 4.5 micron
footprints.</strong> These two footprints are placed separately
from each other. The footprint can be moved or rotated. Click and drag
the center of the footprint. A circle appears with four small circles
("handles") around it. Grab and drag the small circles to rotate it,
or drag the big circle to move it. Change the color, delete, or add
more copies of the IRAC footprints from the layers pop-up.<P> 

<img src="img/sofiafoot.png"> <strong>SOFIA footprints.</strong>
Several different SOFIA footprints are available; the graphic here
shows a selection of them. The available footprints (all of which are
placed separately) are:
<UL>
<LI>FIFI-LS 
<UL>
<LI>Blue (50-120 microns)
<LI>Red (110-200 microns)
</UL>
<LI>FLITECAM 
<UL>
<LI>Imaging
<LI>Grism ABBA
<LI>Grism AB
</UL>
<LI>FORCAST 
<UL>
<LI>Imaging
<LI>Grism a
<LI>Grism b
</UL>
<LI>FPI+
<LI>HAWC+ 
<UL>
<LI>53 microns (Band A), Total Intensity
<LI>53 microns (Band A), Polarization
<LI>89 microns (Band C), Total Intensity
<LI>89 microns (Band C), Polarization
<LI>154 microns (Band D), Total Intensity
<LI>154 microns (Band D), Polarization
<LI>214 microns (Band E), Total Intensity
<LI>214 microns (Band E), Polarization
</UL>
</UL>
Change the color, delete, or add
more copies of the SOFIA footprints from the layers pop-up.<P>



<img src="img/hst.png"> <strong>HST footprints.</strong>
You can overlay the whole focal plane footprint, shown here, or
individual instrument footprints (NICMOS, WFPC2, ACS/WFC, ACS/HRC,
ACS/SBC, WFC3/UVIS, and WFC3/IR).  Consult the <a
href="http://www.stsci.edu/hst/observatory/apertures"
target="_blank">HST documentation <img src="img/jumpout.jpg"
height="10"></A> for specifics on which apertures are which. The
footprint can be moved or rotated. Click and drag the center of the
footprint. A circle appears with four small circles ("handles") around
it. Grab and drag the small circles to rotate it, or drag the big
circle to move it. <strong>Note that</strong> if you overlay the
footprint on a very small image, nothing will appear to have happened.
You need at least a 45 arcmin image to comfortably see the footprint.
Change the color, delete, or add more copies of the HST footprints from
the layers pop-up.<P>

<img src="img/jwstall.png"> <strong>JWST footprints.</strong>
You can overlay the whole focal plane footprint, shown here, or
individual instrument footprints (FGS, MIRI, NIRCAM, NIS, and NIRSPEC).
<strong>Note that</strong> if you overlay the footprint on a very
small image, nothing will appear to have happened. You need at least a
30 arcmin image to comfortably see the entire JWST focal plane. Please
consult the <a href="http://www.stsci.edu/jwst/" target="_blank">JWST
documentation <img src="img/jumpout.jpg" height="10"></A> for details
about the footprints.  In all cases, if the footprint is 'active', a
circle near the middle of the footprint will appear with four small
circles ("handles") around it. Grab and drag the small circles to
rotate it, or drag the big circle to move it. Change the color,
delete, or add more copies of the footprints from the layers pop-up.<P>

<img src="img/wfirst.png"> <strong>Nancy Grace Roman Space Telescope
focal plane footprint.</strong> As above, the footprint can
be moved or rotated. Click and drag the boresight (the cross hairs),
which appears by default to the upper right of the array of squares. 
A circle appears, centered on the boresight, with four small circles
("handles") around it. Grab and drag the small circles to rotate it,
or drag the big circle to move it. <strong>Note that</strong> if you
overlay the footprint on a very small image, nothing will appear to
have happened. You need at least a 60 arcmin image to comfortably see
the footprint, and even then you will probably have to click and drag
to see the entire footprint. Consult the <a
href="https://wfirst.ipac.caltech.edu/" target="_blank">Roman
documentation <img src="img/jumpout.jpg" height="10"></A> for
specifics on the apertures. Change the color, delete, or add more
copies of the Roman footprint from the layers pop-up.<P> 






<hr width="50%">

</BODY>
</HTML>
